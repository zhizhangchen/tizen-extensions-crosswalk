<html>
	<body>
	hello
	<script>
        document.write("From JavaScript");
        var assert_true = function (exp, message){
          console.assert(exp, message);
        }
        var task_init = {description:"HTML5 Introduction",
                  summary:"HTML5 Webinar ",                                               
                          startDate: new tizen.TZDate(2011, 3, 30, 10, 0),     
                                  dueDate: new tizen.TZDate(2011, 5, 30, 10, 0),
                                          location:"Huesca"};       
        var calendar = tizen.calendar.getDefaultCalendar("TASK");                     
        var ev = new tizen.CalendarTask(task_init);                              
        calendar.add(ev);                                 
        var get_ev = calendar.get(ev.id);                                      
        assert_true(ev.dueDate.equalsTo(get_ev.dueDate), "dates should be equal");

        var exp1 = new tizen.TZDate(2011, 11, 30, 12, 40, 0, 0);                                                                 
        var RecurrenceRule_init = {interval: 2,                                                                                  
                                       occurrenceCount: 10,                                                                      
                                       daysOfTheWeek: ["MO","TU"],                                                               
                                       setPositions: [-1,-2],                                                                    
                                       exceptions:[exp1]};                                                                       
            var RecurrenceRule = new tizen.CalendarRecurrenceRule("DAILY",RecurrenceRule_init);                                      
            console.log(JSON.stringify(RecurrenceRule));
            //assert_true(RecurrenceRule.frequency in RecurrenceRuleFrequency, "CalendarRecurrenceRule attribute frequency check");

        /*var calendarListCB=function(calendars){                                                       
                console.assert(calendars != null);                                                                
                console.assert(calendars.length > 0,"calendar.length is not more than 0");                           
                console.assert(calendars[0].id === default_calendar.id, "first calendar returned is the default one");
                console.log("everything is good: " + JSON.stringify(calendars));
            };                                                           
            var default_calendar = tizen.calendar.getDefaultCalendar("EVENT");
            console.log("got default calendar: " + JSON.stringify(default_calendar));
            tizen.calendar.getCalendars("EVENT", calendarListCB);*/

        /*var event_init = {
          startDate: new tizen.TZDate(2011, 3, 30, 10, 0),
          duration: new tizen.TimeDuration(1, "HOURS")
        },
        calendar = tizen.calendar.getDefaultCalendar("EVENT"),
        ev = new tizen.CalendarEvent(event_init);

        console.log("#################################ev before call:" + JSON.stringify(ev));
        calendar.add(ev);
        console.log("ev after call:" + JSON.stringify(ev));
        console.assert(ev.id !== null, "id shouldn't be null");
        console.assert("geolocation" in ev,"The geolocation attribute should exist");
        function testFind() {
          function onSuccess(results) {
            console.log(results.length + " call history item(s) found!");
            for (var i=0; i<results.length; i++) {
              console.log(i + ". " + results[i].toString()); // process the CallHistoryEntry
            }
          }

          // Defines error callback
          function onError(error) {
            console.log("Query failed" + error.name);
          }

          // Defines filter: list CS calls, most recent first
          var filter = new tizen.AttributeFilter("type", "EXACTLY", "TEL");

          // Defines sort mode: descending on call start time.
          var sortMode = new tizen.SortMode("startTime", "DESC");

          // Makes the query and wire up the callbacks
          tizen.callhistory.find(onSuccess,
          onError,
          filter,
          sortMode);

          var numberFilter = new tizen.AttributeFilter(
          "remoteParties.remoteParty",
          "EXACTLY",
          "123456789");

          // Creates a composite filter for time constraints
          var y2009Filter = new tizen.AttributeRangeFilter(
          "startTime",
          new Date(2009, 0, 1),
          new Date(2010, 0, 1));

          var y2011Filter = new tizen.AttributeRangeFilter(
          "startTime",
          new Date(2011, 0, 1),
          new Date(2012, 0, 1));

          var dateFilter = new tizen.CompositeFilter("UNION", [y2009Filter, y2011Filter]);

          // Creates a filter to find all video calls (including cellular, skype, etc)
          // The filter matches exactly any features from the "features" array
          var tfilter = new tizen.AttributeFilter("features", "EXACTLY", "VIDEOCALL");

          // Creates composite filter
          var ifilter = new tizen.CompositeFilter("INTERSECTION",
          [numberFilter, dateFilter, tfilter]);

          // Makes the query and wire up the callbacks; reuse sortMode
          tizen.callhistory.find(onSuccess,
          onError,
          ifilter,
          sortMode);

        }
        var onListenerCB = {
            onadded: function(newItems) {
                console.log("New Item added");
                for (var i in newItems) {
                    console.log("Item " + i + " startTime: " + newItems[i].startTime);
                }
            },
            onchanged: function(changedItems) {
                console.log("Items changed");
                for (var i in changedItems) {
                    console.log("Item " + i + " direction: " + changedItems[i].direction);
                }
            },
            onremoved: function(removedItems) {
                console.log("Items removed");
                for(var i in removedItems)  {
                    console.log("Item " + i + " : " + removedItems[i]);
                }
            }
        };

        try {
            // Registers a call history callback
            //var handle = tizen.callhistory.addChangeListener(onListenerCB);
            var handle = tizen.callhistory.addChangeListener({onadded:true});
            console.log("Handle: " + handle);
            // Unregisters a previously registered listener
            tizen.callhistory.removeChangeListener(handle);
        } catch (error) {
            console.log("Exception - code: " + error.name + " message: " + error.message);
        }
        //testFind()

        tizen.callhistory.find(function (entries) {
            console.log("call history:" + JSON.stringify(entries));
            console.log("removing...");
            try{
            tizen.callhistory.remove(entries[0]);
            tizen.callhistory.removeAll(function () {
              console.log("removeAll succeeded!");
              }, function (error) {
              console.log("removeAll failed:" + error);
            });
            tizen.callhistory.removeBatch(entries, function () {
              console.log("removeBatch succeeded!");
              }, function (error) {
              console.log("removeBatch failed:" + JSON.stringify(error));
            });
            }catch (e) {
              console.log("Exception:" +e);
            }

        }, null);*/

	</script>
	</body>
</html>
